<head>

    <style>
        html,
        body {
            margin: 0;
            padding: 5;
            font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
            font-size: 14px;
        }

        #external-events {
            position: relative;
            float: left;
            z-index: 1;
            height: 100%;
            top: 10px;
            left: 30px;
            width: 15%;
            padding: 0 10px;
            border: 1px solid #ccc;
            background: #eee;
        }

        #external-events .fc-event {
            margin: 4.5px 0;
            height: 40px;
            font-size: 12pt;
            cursor: move;
        }

        #calendar-container {
            height: 1200px;
            margin-left: 10%;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 999;
        }

        #calendar {
            float: right;
            position: relative;
            vertical-align: top;
            max-width: 85%;
            margin: 10px;

        }

        table {
            height: 100%;
        }

        #calendar,
        tr {
            /* font-size: 16pt; */
            height: 40px;
        }

        td {
            font-size: 16pt !important;
        }

        .fc-title {
            font-size: 10pt !important;
        }

        .fc-content {
            font-size: 12pt;
        }

        .fc-day-header {
            font-size: 24pt;
            color: #5d58af;
            font-weight: bold;
        }

        .fc-time-grid-event {
            background-color: #5d58af !important;
        }


        .hover_bkgr_fricc,
        .hover_bkgr_fricc_custom {
            background: rgba(0, 0, 0, .4);
            cursor: pointer;
            display: none;
            height: 100%;
            position: fixed;
            text-align: center;
            top: 0;
            width: 100%;
            z-index: 10000;
        }

        .hover_bkgr_fricc .helper,
        .hover_bkgr_fricc_custom .helper-custom {
            display: inline-block;
            height: 100%;
            vertical-align: middle;
        }

        .hover_bkgr_fricc>div,
        .hover_bkgr_fricc_custom>div {
            background-color: #fff;
            box-shadow: 10px 10px 60px #555;
            display: inline-block;
            height: auto;
            max-width: 551px;
            min-height: 100px;
            vertical-align: middle;
            width: 60%;
            position: relative;
            border-radius: 8px;
            padding: 15px 5%;
        }

        .popupCloseButton {
            background-color: #fff;
            border: 3px solid #999;
            border-radius: 50px;
            cursor: pointer;
            display: inline-block;
            font-family: arial;
            font-weight: bold;
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 25px;
            line-height: 30px;
            width: 30px;
            height: 30px;
            text-align: center;
        }

        .popupCloseButton:hover {
            background-color: #ccc;
        }

        .trigger_popup_fricc {
            cursor: pointer;
            font-size: 20px;
            margin: 20px;
            display: inline-block;
            font-weight: bold;
        }

        label {
            font-size: 20pt;
            font-weight: bolder;
            color: cornsilk;
            background-color: blueviolet;
            border-radius: 5px;
        }

        #desc {
            height: 30px;
            border-radius: 5px;
        }
    </style>

    <meta charset='utf-8' />


    <link href='node_modules/@fullcalendar/core/main.css' rel='stylesheet' />
    <link href='node_modules/@fullcalendar/daygrid/main.css' rel='stylesheet' />
    <link href='node_modules/@fullcalendar/timegrid/main.css' rel='stylesheet' />
    <!-- <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css"> -->


    <script src='node_modules/@fullcalendar/core/main.js'></script>
    <script src='node_modules/@fullcalendar/daygrid/main.js'></script>
    <script src='node_modules/@fullcalendar/timegrid/main.js'></script>
    <script src='node_modules/@fullcalendar/interaction/main.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js"> -->
    </script>



    <script>
        document.addEventListener('DOMContentLoaded', function () {

            var eventContents = [];

            $('div.fc-event').each(function () {
                eventContents.push($(this).text());
            });


            var Calendar = FullCalendar.Calendar;
            var Draggable = FullCalendarInteraction.Draggable;

            var containerEl = document.getElementById('external-events');
            var calendarEl = document.getElementById('calendar');
            var checkbox = document.getElementById('drop-remove');

            // initialize the external events

            // $('#div').draggable();
            // $("#div").mousedown(function () {
            //     console.log('clicked!')

            new Draggable(containerEl, {
                itemSelector: '.fc-event',
                eventData: function (eventEl) {
                    return {
                        title: eventEl.innerText
                    };
                }
            });

            // initialize the calendar

            var calendar = new Calendar(calendarEl, {
                columnHeaderText: function (date) {
                    if (date.getDay() === date.getDay()) {
                        return 'Your Childs Day!';
                    } else {
                        return mom.format('LLL');
                    }
                },

                eventRender: function (eventInfo) {
                    // eventInfo.el.querySelector('.fc-title').innerHTML +=
                    // var divInnerHTML = eventInfo.el.querySelector('.fc-title').innerHTML;
                    // console.log($(this).divInnerHTML);
                    // divInnerHTML +=
                    eventInfo.el.querySelector('.fc-title').innerHTML +=
                        "<div class='eventDescription' id='eventDescription'>PLACEHOLDER</div>";

                },

                plugins: ['interaction', 'dayGrid', 'timeGrid'],

                defaultView: 'timeGridDay',

                duration: '00:15:00',

                slotDuration: '00:15',

                slotLabelInterval: '00:30',

                minTime: '06:00:00',

                allDaySlot: false,
                businessHours: false,
                eventOverlap: false,
                editable: true,
                droppable: true, // this allows things to be dropped onto the calendar
                slotEventOverlap: false,


                header: {
                    right: 'none',
                    center: 'none',
                    left: 'none'

                },

                drop: function (info) {
                    // // is the "remove after drop" checkbox checked?
                    // // info.draggedEl.parentNode.append(info.draggedEl);
                    // console.log(info.draggedEl.innerText.includes("Custom"));
                    // var temp = info.draggedEl.innerText.includes("Custom")
                    // if (temp = true) {
                    //     console.log("inside custome 1")
                    //     $('.hover_bkgr_fricc_custom').show(function () {
                    //         $('.remove-custom').click(function () {
                    //             // info.event.remove();
                    //             calendar.getEventById(id)
                    //             console.log(info)
                    //             console.log("Remove event clicked")
                    //         });
                    //     })
                    //     $('.popupCloseButton').click(function () {
                    //         $('.hover_bkgr_fricc_custom').hide();
                    //     });

                    //     $('.remove_custom').click(function () {
                    //         $('.hover_bkgr_fricc_custom').hide();
                    //     });
                    // }
                },

                eventClick: function (info) {
                    // info.event.remove();
                    console.log(info.event.title);

                    $('.hover_bkgr_fricc').show(function () {
                        var eventDesc = document.getElementById("desc").value


                        $('.remove').click(function () {
                            $('.hover_bkgr_fricc').hide();
                            info.event.remove(this);
                            console.log("Remove event clicked")
                            console.log(eventDesc);
                            eventDesc.innerText = "";
                            console.log(eventDesc);

                        });
                        $('.update').click(function () {
                            var eventDesc = document.getElementById("desc")
                                .value
                            var divInnerText = document.getElementById(
                                "eventDescription");
                            $('.eventDescription').each(function () {
                                console.log(this.innerText);
                                console.log(eventDesc);

                                divInnerText.innerText = eventDesc;

                                eventDesc.value = "";
                            })

                            // eventRender: function (info) {
                            //     var tooltip = new Tooltip(info.el, {
                            //         title: info.event.extendedProps
                            //             .description,
                            //         placement: 'top',
                            //         trigger: 'hover',
                            //         container: 'body'
                            //     });
                            // }
                        });




                        // event.description = eventDesc;

                        // $('#calendar').fullCalendar('updateEvent', event);
                    })

                },



            });

            // $('.remove').click(function () {
            //     info.event.remove();
            //     console.log("Remove event clicked")
            // });


            // $('.hover_bkgr_fricc').click(function () {
            //     $('.hover_bkgr_fricc').hide();
            // });

            $('.popupCloseButton').click(function () {
                $('.hover_bkgr_fricc').hide();
            });

            $('.remove').click(function () {
                $('.hover_bkgr_fricc').hide();
            });

            //builds calendar
            calendar.render();

            //scheduler submit
            var button = document.getElementById('submit');
            var events = [];
            var startTime = [];

            //start time
            var wakeTime = "12:01 AM";
            var breakfastTime = "12:01 AM";
            var school1Time = "12:01 AM";
            var school2Time = "12:01 AM";
            var school3Time = "12:01 AM";
            var lunchTime = "12:01 AM";
            var snackTime = "12:01 AM";
            var exercise1Time = "12:01 AM";
            var exercise2Time = "12:01 AM";
            var exercise3Time = "12:01 AM";
            var choreTime = "12:01 AM";
            var talkTime = "12:01 AM";
            var dinnerTime = "12:01 AM";
            var open1Time = "12:01 AM";
            var open2Time = "12:01 AM";
            var open3Time = "12:01 AM";
            var bedtimePrepTime = "12:01 AM";
            var bedtimeTime = "12:01 AM";
            var custom1Time = "12:01 AM";
            var custom2Time = "12:01 AM";
            var custom3Time = "12:01 AM";
            var nonETime = "12:01 AM";
            var eTime = "12:01 AM";
            var morningWalkTime = "12:01 AM";

            //subscribed
            var wakeSubscribed = 0;
            var breakfastSubscribed = 0;
            var school1Subscribed = 0;
            var school2Subscribed = 0;
            var school3Subscribed = 0;
            var lunchSubscribed = 0;
            var snackSubscribed = 0;
            var exercise1Subscribed = 0;
            var exercise2Subscribed = 0;
            var exercise3Subscribed = 0;
            var choreSubscribed = 0;
            var talkSubscribed = 0;
            var dinnerSubscribed = 0;
            var open1Subscribed = 0;
            var open2Subscribed = 0;
            var open3Subscribed = 0;
            var bedtimePrepSubscribed = 0;
            var bedtimeSubscribed = 0;
            var custom1Subscribed = 0;
            var custom2Subscribed = 0;
            var custom3Subscribed = 0;
            var nonESubscribed = 0;
            var eSubscribed = 0;
            var morningWalkSubscribed = 0;

            //submit function
            button.onclick = function () {

                //needed arrays
                events = [];
                startTime = [];

                //pushes title text to events[]
                $('.fc-title').each(function () {
                    events.push($(this).text())
                })

                //
                $('div.fc-time').each(function () {
                    // var timeSub = (($(this).attr("data-full").substring(0, 7)))
                    startTime.push($(this).attr("data-full").substring(0, 8).split(' ')
                        .join(''))
                })

                //check if array contains 'activity' sets activitySubscibed to 1 if yes, 0 if no. Sets activityTime to the value of the element in the position of the
                //startTime[] as in the events[]
                if ($.inArray("Wake-Up Time", events) >= 0) {
                    wakeSubscribed = 1;
                    wakeTime = startTime[($.inArray("Wake-Up Time", events))]

                    console.log("Wake: " + wakeSubscribed, wakeTime)
                }

                if ($.inArray("Breakfast Time", events) >= 0) {
                    breakfastSubscribed = 1;
                    breakfastTime = startTime[($.inArray("Breakfast Time", events))]

                    console.log("Breakfast: " + breakfastSubscribed, breakfastTime)
                }

                if ($.inArray("Online School 1", events) >= 0) {
                    school1Subscribed = 1;
                    school1Time = startTime[($.inArray("Online School 1", events))]

                    console.log("Online School 1: " + school1Subscribed, school1Time)
                }

                if ($.inArray("Online School 2", events) >= 0) {
                    school2Subscribed = 1;
                    school2Time = startTime[($.inArray("Online School 2", events))]

                    console.log("Online School 2: " + school2Subscribed, school2Time)
                }

                if ($.inArray("Online School 3", events) >= 0) {
                    school3Subscribed = 1;
                    school3Time = startTime[($.inArray("Online School 3", events))]

                    console.log("Online School 3: " + school3Subscribed, school3Time)
                }

                if ($.inArray("Lunch Time", events) >= 0) {
                    lunchSubscribed = 1;
                    lunchTime = startTime[($.inArray("Lunch Time", events))]

                    console.log("Lunch Time: " + wakeSubscribed, wakeTime)
                }

                if ($.inArray("Snack Time", events) >= 0) {
                    snackSubscribed = 1;
                    snackTime = startTime[($.inArray("Snack Time", events))]

                    console.log("Snack Time: " + snackSubscribed, snackTime)
                }

                if ($.inArray("Exercise Time 1", events) >= 0) {
                    exercise1Subscribed = 1;
                    exercise1Time = startTime[($.inArray("Exercise Time 1", events))]

                    console.log("Exercise Time 1: " + exercise1Subscribed, exercise1Time)
                }

                if ($.inArray("Exercise Time 2", events) >= 0) {
                    exercise2Subscribed = 1;
                    exercise2Time = startTime[($.inArray("Exercise Time 2", events))]

                    console.log("Exercise Time 2: " + exercise2Subscribed, exercise2Time)
                }

                if ($.inArray("Exercise Time 3", events) >= 0) {
                    exercise3Subscribed = 1;
                    exercise3Time = startTime[($.inArray("Exercise Time 3", events))]

                    console.log("Exercise Time 3: " + exercise3Subscribed, exercise3Time)
                }

                if ($.inArray("Chore Time", events) >= 0) {
                    choreSubscribed = 1;
                    choreTime = startTime[($.inArray("Chore Time", events))]

                    console.log("Chore Time: " + choreSubscribed, choreTime)
                }

                if ($.inArray("Family Talk Time", events) >= 0) {
                    talkSubscribed = 1;
                    talkTime = startTime[($.inArray("Family Talk Time", events))]

                    console.log("Family Talk Time: " + talkSubscribed, talkTime)
                }

                if ($.inArray("Dinner Time", events) >= 0) {
                    dinnerSubscribed = 1;
                    dinnerTime = startTime[($.inArray("Dinner Time", events))]

                    console.log("Dinner Time: " + dinnerSubscribed, dinnerTime)
                }

                if ($.inArray("Open Time 1", events) >= 0) {
                    open1Subscribed = 1;
                    open1Time = startTime[($.inArray("Open Time 1", events))]

                    console.log("Open Time 1:" + open1Subscribed, open1Time)
                }

                if ($.inArray("Open Time 2", events) >= 0) {
                    open2Subscribed = 1;
                    open2Time = startTime[($.inArray("Open Time 2", events))]

                    console.log("Open Time 2:" + open2Subscribed, open2Time)
                }

                if ($.inArray("Open Time 3", events) >= 0) {
                    open3Subscribed = 1;
                    open3Time = startTime[($.inArray("Open Time 3", events))]

                    console.log("Open Time 3:" + open3Subscribed, open3Time)
                }

                if ($.inArray("Bedtime Prep", events) >= 0) {
                    bedtimePrepSubscribed = 1;
                    bedtimePrepTime = startTime[($.inArray("Bedtime Prep", events))]

                    console.log("Bedtime Prep: " + bedtimePrepSubscribed, bedtimePrepTime)
                }

                if ($.inArray("Bedtime", events) >= 0) {
                    bedtimeSubscribed = 1;
                    bedtimeTime = startTime[($.inArray("Bedtime", events))]

                    console.log("Bedtime: " + bedtimeSubscribed, bedtimeTime)
                }

                if ($.inArray("Custom 1", events) >= 0) {
                    custom1Subscribed = 1;
                    custom1Time = startTime[($.inArray("Custom 1", events))]

                    console.log("Custom 1: " + custom2Subscribed, custom2Time)
                }

                if ($.inArray("Custom 2", events) >= 0) {
                    custom2Subscribed = 1;
                    custom2Time = startTime[($.inArray("Custom 2", events))]

                    console.log("Custom 2: " + custom2Subscribed, custom2Time)
                }

                if ($.inArray("Custom 3", events) >= 0) {
                    custom3Subscribed = 1;
                    custom3Time = startTime[($.inArray("Custom 3", events))]

                    console.log("Custom 3: " + custom2Subscribed, custom2Time)
                }

                if ($.inArray("Non-E-Time", events) >= 0) {
                    nonESubscribed = 1;
                    nonETime = startTime[($.inArray("Non-E-Time", events))]

                    console.log("Non-E-Time: " + nonESubscribed, nonETime)
                }

                if ($.inArray("E-Time", events) >= 0) {
                    eSubscribed = 1;
                    eTime = startTime[($.inArray("E-Time", events))]

                    console.log("E-Time: " + eSubscribed, eTime)
                }

                if ($.inArray("Morning Walk", events) >= 0) {
                    morningWalkSubscribed = 1;
                    morningWalkTime = startTime[($.inArray("Morning Walk", events))]

                    console.log("Morning Walk: " + morningWalkSubscribed, morningWalkTime)
                }


                console.log(startTime);

                console.log(events);

            }
        });
    </script>

</head>



<body style="overflow: visible">
    <div id='external-events'>
        <p>
            <strong>Draggable Events</strong>
        </p>
        <div id='eventNames'>
            <div id='div' class='fc-event'>Wake-Up Time</div>
            <div id='div' class='fc-event'>Breakfast Time</div>
            <div id='div' class='fc-event'>Online School 1</div>
            <div id='div' class='fc-event'>Online School 2</div>
            <div id='div' class='fc-event'>Online School 3</div>
            <div id='div' class='fc-event'>Lunch Time</div>
            <div id='div' class='fc-event'>Snack Time</div>
            <div id='div' class='fc-event'>Exercise Time 1</div>
            <div id='div' class='fc-event'>Exercise Time 2</div>
            <div id='div' class='fc-event'>Exercise Time 3</div>
            <div id='div' class='fc-event'>Chore Time</div>
            <div id='div' class='fc-event'>Family Talk Time</div>
            <div id='div' class='fc-event'>Dinner Time</div>
            <div id='div' class='fc-event'>Open Time 1</div>
            <div id='div' class='fc-event'>Open Time 2</div>
            <div id='div' class='fc-event'>Open Time 3</div>
            <div id='div' class='fc-event'>Bedtime Prep</div>
            <div id='div' class='fc-event'>Bedtime</div>
            <div id='div' class='fc-event'>Custom 1</div>
            <div id='div' class='fc-event'>Custom 2</div>
            <div id='div' class='fc-event'>Custom 3</div>
            <div id='div' class='fc-event'>Non-E-Time</div>
            <div id='div' class='fc-event'>E-Time</div>
            <div id='div' class='fc-event'>Morning Walk</div>
        </div>

        <button id="submit" type="button">Submit!</button>

        <p>
        </p>
    </div>

    <div class="hover_bkgr_fricc_custom">
        <span class="helper-custom"></span>
        <div>
            <div class="popupCloseButton">&times;</div>
            <form>
                <label for="title">Event Title:</label>
                <input type="text" id="title_custom" name="Title"><br>
                <label for="description">Event Description:</label>
                <input type="text" id="desc_custom" name="desc"><br>
                <hr><br>
                <input class="update-custom" type="button" value="Update Event">

                <input class="remove-custom" type="button" value="Remove Event">
            </form>
        </div>
    </div>

    <div class="hover_bkgr_fricc">
        <span class="helper"></span>
        <div>
            <div class="popupCloseButton">&times;</div>
            <form>
                <label for="description">Event Description:</label>
                <input type="text" id="desc" name="desc"><br>
                <hr><br>
                <input class="update" type="button" value="Update Event">

                <input class="remove" type="button" value="Remove Event">
            </form>
        </div>
    </div>

    <div id='calendar-container'>
        <div id='calendar'></div>
    </div>

</body>

</html>